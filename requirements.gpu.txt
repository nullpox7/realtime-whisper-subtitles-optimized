# Real-time Whisper Subtitles - GPU Optimized Dependencies (v2.2.3)
# CUDA 11.8 + PyTorch 2.1.0 stable configuration - memory-safe and compatible
# Encoding: UTF-8

# Web Framework (essential)
fastapi==0.110.0
uvicorn[standard]==0.29.0
websockets==12.0
jinja2==3.1.3
python-multipart==0.0.9

# PyTorch with CUDA 11.8 support (installed separately in Dockerfile)
# torch==2.1.0+cu118 --index-url https://download.pytorch.org/whl/cu118
# torchaudio==2.1.0+cu118 --index-url https://download.pytorch.org/whl/cu118

# Core AI/ML (memory-safe versions compatible with PyTorch 2.1.0)
faster-whisper==0.10.1
transformers==4.35.2
accelerate==0.25.0

# Audio Processing (stable, memory-safe)
librosa==0.10.1
soundfile==0.12.1

# Scientific Computing - Memory-safe versions compatible with PyTorch 2.1.0
numpy>=1.24.0,<1.26.0
scipy==1.11.4

# System utilities (stable versions)
psutil==5.9.8
python-dotenv==1.0.1
requests==2.31.0
aiofiles==23.2.1

# Production server
gunicorn==21.2.0

# Monitoring and metrics
prometheus-client==0.19.0

# Essential utilities
tqdm==4.66.2
packaging==23.2

# Async HTTP client
httpx==0.26.0

# Logging utilities
structlog==23.2.0

# Date/time handling
python-dateutil==2.8.2

# Configuration management
pyyaml==6.0.1

# Memory optimization (stable)
pympler==0.9

# Additional ML/Audio dependencies optimized for stability
resampy==0.4.2
audioread==3.0.1
pooch>=1.8.0,<2.0.0
joblib>=1.3.0,<1.4.0
threadpoolctl>=3.1.0,<4.0.0

# Redis client for caching
redis==5.0.1
aioredis==2.0.1

# Additional performance libraries (stable)
orjson==3.9.10
msgpack==1.0.7

# Model downloading and caching (stable)
huggingface-hub==0.19.4

# Development and debugging (optional, stable)
ipython==8.18.1

# Exclude problematic packages that cause memory issues:
# cupy-cuda* - Can cause memory conflicts with PyTorch
# nvidia-* packages - Let Docker handle CUDA libraries
# noisereduce - Can cause double free errors
# pynvml - Not essential, can cause conflicts
# triton - Not needed for inference, can cause conflicts

# Audio codec support (lightweight)
mutagen==1.47.0

# JSON schema validation
jsonschema==4.20.0

# HTTP client utilities
urllib3==2.1.0

# Character encoding detection
chardet==5.2.0

# File system utilities
pathlib2==2.3.7