# Real-time Whisper Subtitles - Docker Image Error Fix Guide

## ? Error: "???Docker???????????" (Docker Image Not Found)

??????????????????

1. **??????????**: CUDA 12.4???????????
2. **Docker?????**: ????????
3. **???????**: ????????????????
4. **NVIDIA Container Toolkit???**: GPU??????????????

## ? ????? - ?????????

### ????????
```bash
# ?????????????????
git clone https://github.com/nullpox7/realtime-whisper-subtitles-optimized.git
cd realtime-whisper-subtitles-optimized

# ????????????
chmod +x fix_docker_images.sh
./fix_docker_images.sh

# ????????????
open http://localhost:8000
```

### ??????????
- ? **????**: ????????
- ? **?????????**: ????????????
- ? **GPU/CPU??**: ??????????
- ? **?????**: ????????????
- ? **??????**: ?????
- ? **????**: ??????

## ? ???????????

### 1. Docker????
```bash
# Docker daemon????
docker info

# ?????????
docker ps

# ????????
docker-compose down --remove-orphans
```

### 2. ?????????
```bash
# Python????????
docker pull python:3.11-slim

# CUDA ???????GPU??????
docker pull nvidia/cuda:11.8-devel-ubuntu22.04

# Redis ??????
docker pull redis:7.2-alpine
```

### 3. GPU?????GPU??????
```bash
# NVIDIA ???????
nvidia-smi

# NVIDIA Container Toolkit??
docker run --rm --gpus all nvidia/cuda:11.8-base-ubuntu22.04 nvidia-smi
```

## ? ???? (v2.3.0)

### Dockerfile???
- **?????????**: CUDA 11.8???12.4?????
- **PyTorch???**: 2.1.0+cu118/2.1.0+cpu
- **?????????**: pydub?webrtcvad?noisereduce???

### docker-compose.yml???
- **?????**: ???????
- **????????**: whisper-app???whisper-subtitles?
- **GPU?????**: deploy.resources???

### requirements.txt???
- **??????**: ???????????
- **?????**: numpy <2.0.0??
- **??????**: ?????????????

## ? ???????

### CPU-only????
```bash
# CPU?????
docker-compose -f docker-compose.yml up -d

# .env??????
WHISPER_MODEL=base
DEVICE=cpu
COMPUTE_TYPE=int8
BATCH_SIZE=4
MAX_WORKERS=2
```

### GPU??????
```bash
# GPU????
docker-compose -f docker-compose.gpu.yml up -d

# .env??????
WHISPER_MODEL=large-v3
DEVICE=cuda
COMPUTE_TYPE=float16
BATCH_SIZE=16
MAX_WORKERS=4
```

### NVIDIA Container Toolkit??????
```bash
# Ubuntu/Debian
distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg
curl -s -L https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.list | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
sudo apt-get update && sudo apt-get install -y nvidia-container-toolkit
sudo systemctl restart docker
```

## ? ?????????????

### ???????????

| ??? | ?? | ???? |
|--------|------|----------|
| `nvidia/cuda:12.4 not found` | CUDA???????? | `./fix_docker_images.sh`?? |
| `pydub import error` | ??????? | ???requirements.txt?? |
| `webrtcvad not found` | ???????? | ????????????? |
| `torch CUDA error` | PyTorch??????? | CUDA 11.8+PyTorch 2.1.0?? |
| `compose service error` | ???? | ???docker-compose.yml?? |

### ????????
```bash
# ???????
docker-compose build --no-cache 2>&1 | tee build.log

# ??????
docker-compose logs -f

# ????????
docker-compose ps

# ???????
curl http://localhost:8000/health
```

## ? ????????

### ???????????
```bash
# ????????
git pull origin main

# ?????????
./fix_docker_images.sh --force

# ??
curl http://localhost:8000/health
```

## ? ????

### ???????????
1. **????**: `docker info && nvidia-smi`
2. **????**: `docker-compose logs`
3. **??????**: ?????????????
4. **Issue??**: [GitHub Issues](https://github.com/nullpox7/realtime-whisper-subtitles-optimized/issues)

### ???????
```
? ????!
============
? ????URL: http://localhost:8000
? ?????: healthy
??  GPU??: true
```

---

**? ????????????Docker??????????????????????????????????????**